<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:p="http://java.sun.com/jsf/html">
<f:metadata>
    <f:event type="preRenderView" listener="#{passwordUpdateController.onPageLoad}"/>
</f:metadata>

<h:head>
    <title>Slaptažodžio keitimas</title>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

    <h:outputStylesheet name="/css/vendor/foundation.css" />
    <h:outputStylesheet name="/css/vendor/foundation-icons.css" />
    <h:outputStylesheet name="/css/styles.css" />
</h:head>
<h:body>
    <p:outputLabel value="#{passwordUpdateController.message}" rendered="#{not empty passwordUpdateController.message}"/>
    <h:form rendered="#{empty passwordUpdateController.message}">
        <div>
            <div class="row section">
                <div class="columns small-10 small-offset-1 medium-6 medium-offset-3 large-4 large-offset-4">
                    <h4 class="form-title text-center">
                        Slaptažodžio keitimas
                    </h4>
                    <br />
                    <div class="row">
                        <div class="columns">
                            <label class="input-label">Slaptažodis
                                <i class="fi-torso" />
                                <h:inputSecret binding="#{newPassword}" value="#{passwordUpdateController.password}" />
                            </label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="columns">
                            <label class="input-label">Pakartokite slaptažodį
                                <i class="fi-torso" />
                                <h:inputSecret binding="#{newPasswordRepeat}" />
                            </label>
                        </div>
                    </div>
                    <h:inputHidden id="passwordValidationInput" value="true">
                        <f:validator binding="#{changePasswordValidation}"/>
                        <f:attribute name="newPassword" value="#{newPassword}"/>
                        <f:attribute name="newPasswordRepeat" value="#{newPasswordRepeat}"/>
                        <f:attribute name="oldPasswordRequired" value="false"/>
                        <f:attribute name="currentUserId" value="#{passwordUpdateController.user.id}"/>
                    </h:inputHidden>
                    <div class="row">
                        <div class="columns">
                            <h:commandButton class="button success expanded" value="KEISTI SLAPTAŽODĮ" action="#{passwordUpdateController.changePassword}" >
                                <f:ajax execute="@form" render="@form" />
                            </h:commandButton>
                        </div>
                    </div>
                    <div class="row">
                        <div class="columns">
                            <div class="mar-bot-5">
                                <h:message class="alert-text" for="passwordValidationInput"/>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </h:form>
    <!-- END OF LOGIN FORM -->

    <h:outputScript name="js/vendor/jquery-3.3.1.min.js"/>
    <h:outputScript name="js/vendor/foundation.js"/>
    <!--<h:outputScript name="js/foundation-app.js"/>-->
    <h:outputScript name="js/vendor/what-input.js"/>

</h:body>
</html>
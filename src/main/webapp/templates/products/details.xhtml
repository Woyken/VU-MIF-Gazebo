<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">

    <!-- PAGE TITLE. -->
    <div class="row column text-center section">
        <h1 class="section-title">
            <p:outputLabel styleClass="large-text" value="#{productDetailsController.productView.title}"/>
        </h1>
    </div> <!-- END OF PAGE TITLE. -->


    <!-- PRODUCT DETAILS -->
    <div class="row align-middle align-center product-details-row">
        <div class="medium-6 columns">
            <!-- Main image. -->
            <p:graphicImage class="thumbnail" value="#{imageStreamer.image}">
                <f:param name="id" value="#{productDetailsController.productView.images.get(0).id}"/>
            </p:graphicImage>

            <!-- Smaller images. -->
            <div class="row small-up-4">
                <ui:repeat value="#{productDetailsController.productView.images}" var="image" varStatus="loop">
                    <!--Image is cached by default. If you want to refresh, add cache="false"-->
                    <h:outputText value="&lt;div class='column'&gt;" escape="false" rendered="#{!loop.first}"/>
                    <p:graphicImage class="thumbnail" value="#{imageStreamer.image}" rendered="#{!loop.first}">
                        <f:param name="id" value="#{image.id}"/>
                    </p:graphicImage>
                    <h:outputText value="&lt;/div&gt;" escape="false" rendered="#{!loop.first}"/>
                </ui:repeat>
            </div>

        </div>

        <!-- Side column. -->
        <div class="medium-6 large-5 columns">
            <p class="text-justify">
                <p:outputLabel value="#{productDetailsController.productView.description}"/>
            </p>
            <div class="row">
                <div class="small-6 columns shrink">
                    <label for="middle-label" class="middle">Kiekis</label>
                </div>
                <div class="small-6 columns">
                    <!-- TODO: Max skaičius priklauso nuo prekių kiekio sandelyje! -->
                    <input class="half-width" type="number" id="middle-label" value="1" min="1" max="99" />
                </div>
            </div>

            <div class="row">
                <div class="small-6 columns shrink">
                    <p>Kaina:</p>
                </div>
                <div class="small-6 columns">
                    <!-- TODO: Galutinė kaina priklausys nuo prekių kiekio! -->
                    <p>€ #{productDetailsController.productView.price}</p>
                </div>
            </div>

            <h:form>
                <h:commandButton class="button large hollow expanded primary-inverted" value="PRIDĖTI Į KREPŠELĮ" pt:data-open="inform-user-about-adding-to-cart-modal" actionListener="#{cartController.addProductToCart(productDetailsController.productView.id)}">
                    <f:ajax execute="@form" render="@none" />
                </h:commandButton>
            </h:form>
        </div>
    </div> <!-- END OF PRODUCT DETAILS -->


    <!-- INFORM USER ABOUT ADDING TO CART MODAL -->
    <div id="inform-user-about-adding-to-cart-modal"
         class="reveal"
         data-reveal=""
         data-overlay="false"
         data-animation-in="fade-in fast">
        <div class="row">
            <div class="columns small-8 small-offset-2">
                <h4 class="form-title text-center">
                    Prekė pridėta prie jūsų krepšelio
                </h4>
                <br />
                <div class="row">
                    <div class="columns small-12">
                        <a class="button orange expanded" data-close="">Supratau</a>
                    </div>
                </div>
            </div>
        </div>
    </div> <!-- END OF INFORM USER ABOUT ADDING TO CART MODAL -->



</ui:composition>
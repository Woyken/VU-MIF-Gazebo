<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
>
<ui:composition
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
        xmlns:p="http://primefaces.org/ui"
        xmlns:f="http://xmlns.jcp.org/jsf/core">

    <div id="all-users-window">
        <div class="row section">
            <h:panelGroup id="allUsersPanel" style="display:contents">
                <ui:repeat value="#{usersController.users}" var="user">
                    <div class="columns medium-3 small-6 admin-user-box">
                        <a href="../../admin-details-user.xhtml?userId=#{user.id}">
                            <p class="user-email-box">
                                <b>
                                    #{user.email}
                                </b>
                            </p>
                            <p>
                                Užsakymai: 54
                                <br/>
                                Vidutinė suma: 19€
                                <br/>
                                Bendra suma: 769€
                            </p>
                        </a>
                        <h:form id="my-form">
                            <div class="small-8 small-offset-2 medium-12 medium-offset-0">
                                <h:commandButton value="#{user.blocked ? 'Atblokuoti' : 'Blokuoti'}" styleClass="button expanded #{user.blocked ? 'green' : 'orange'}" disabled="#{user.role == 'ADMIN' ? 'true' : 'false'}">
                                    <f:ajax execute="@form" listener="#{usersController.blockUser(user)}" render="allUsersPanel"/>
                                </h:commandButton>
                            </div>
                        </h:form>
                    </div>
                </ui:repeat>
            </h:panelGroup>
        </div>
    </div>

</ui:composition>
</html>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

<f:metadata>
    <f:event type="preRenderView" listener="#{productController.onPageLoad}"/>
</f:metadata>

<h:head/>
<h:body>
    <ui:repeat value="#{productController.products}" var="product">
        <div>
            <span>ID: #{product.id}, PRICE: #{product.price}, TITLE: #{product.title}, DESCRIPTION: #{product.description}, IMAGES</span>
            <ui:repeat value="#{product.images}" var="image">
                <!--Image is cached by default. If you want to refresh, add cache="false"-->
                <p:graphicImage value="#{imageStreamer.image}" width="10%" height="10%">
                    <f:param name="id" value="#{image.id}"/>
                </p:graphicImage>
            </ui:repeat>
        </div>
    </ui:repeat>
</h:body>
</html>